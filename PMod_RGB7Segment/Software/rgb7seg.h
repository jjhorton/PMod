#ifndef RGB7SEG_H
#define RGB7SEG_H

const int Led_lookup[] = {   90,120,150,180,210,240, //D1  .. D6
                            183,213,243,  6, 36, 66, //D7  .. D12
                              3, 33, 63,  0, 30, 60, //D13 .. D18
                             93, 123, 153, 96,       //D19 .. D22
                             99,129,159,189,219,249, //D23 .. D28
                            192,222,252, 15, 45, 75, //D29 .. D34
                             12, 42, 72,  9, 39, 69, //D35 .. D40
                            102,132,162,105,135,165, //D41 .. D46
                            108,138,168,198,228,258, //D47 .. D52
                            201,231,261, 24, 54, 84, //D53 .. D58
                             21, 51, 81, 78, 48, 18, //D59 .. D64
                            111,141,171,114,         //D65 .. D68
                            117,147,177,207,237,267, //D69 .. D74
                            324,333,342,273,282,291, //D75 .. D80
                            270,279,288, 87, 57, 27, //D81 .. D86
                            297,306,315,300          //D87 .. D90 
                    };

const int Led_segments[][8][3]=  {{{1,2,3},{4,5,6},{7,8,9},{10,11,12},
                                   {13,14,15},{16,17,18},{19,20,21},{22,0,0}},
                                  {{23,24,25},{26,27,28},{29,30,31},{32,33,34},
                                   {35,36,37},{38,39,40},{41,42,43},{44, 0, 0}},
                                  {{47,48,49},{50,51,52},{53,54,55},{56,57,58},
                                   {59,60,61},{62,63,64},{65,66,67},{68, 0, 0}},
                                  {{69,70,71},{72,73,74},{75,76,77},{78,79,80},
                                   {81,82,83},{84,85,86},{87,88,89},{90,0,0}}
                                 };

							                 //A B C D E F G P
const int Led_digit[10][8] =   {{1,1,1,1,1,1,0,0},  //0
								                {0,1,1,0,0,0,0,0},  //1
					                			{1,1,0,1,1,0,1,0},  //2
				                				{1,1,1,1,0,0,1,0},  //3
				                				{0,1,1,0,0,1,1,0},  //4
			                					{1,0,1,1,0,1,1,0},  //5
			                					{1,0,1,1,1,1,1,0},  //6
			                					{1,1,1,0,0,0,0,0},  //7
		                						{1,1,1,1,1,1,1,0},	//8
		                						{1,1,1,1,0,1,1,0}}; //9

const int RGB_LOOKUP[][3] = {{255,14,240},{255,13,240},{255,12,240},{255,11,240},
														{255,10,240},{255,9,240},{255,8,240},{255,7,240},
														{255,6,240},{255,5,240},{255,4,240},{255,3,240},
														{255,2,240},{255,1,240},{255,0,240},{255,0,224},
														{255,0,208},{255,0,192},{255,0,176},{255,0,160},
														{255,0,144},{255,0,128},{255,0,112},{255,0,96 },
														{255,0,80 },{255,0,64 },{255,0,48 },{255,0,32 },
														{255,0,16 },{255,0,0  },{255,10,0 },{255,20,0 },
														{255,30,0 },{255,40,0 },{255,50,0 },{255,60,0 },
														{255,70,0 },{255,80,0 },{255,90,0 },{255,100,0},
														{255,110,0},{255,120,0},{255,130,0},{255,140,0},
														{255,150,0},{255,160,0},{255,170,0},{255,180,0},
														{255,190,0},{255,200,0},{255,210,0},{255,220,0},
														{255,230,0},{255,240,0},{255,250,0},{253,255,0},
														{215,255,0},{176,255,0},{138,255,0},{101,255,0},
														{62,255,0 },{23,255,0 },{0,255,16 },{0,255,54 },
														{0,255,92 },{0,255,131},{0,255,168},{0,255,208},
														{0,255,244},{0,228,255},{0,212,255},{0,196,255},
														{0,180,255},{0,164,255},{0,148,255},{0,132,255},
														{0,116,255},{0,100,255},{0,84,255 },{0,68,255 },
														{0,50,255 },{0,34,255 },{0,18,255 },{0,2,255  },
														{0,0,255  },{1,0,255  },{2,0,255  },{3,0,255  },
														{4,0,255  },{5,0,255 }};

const uint8_t gamma8[] = {
    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,
    0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  0,  1,  1,  1,  1,
    1,  1,  1,  1,  1,  1,  1,  1,  1,  2,  2,  2,  2,  2,  2,  2,
    2,  3,  3,  3,  3,  3,  3,  3,  4,  4,  4,  4,  4,  5,  5,  5,
    5,  6,  6,  6,  6,  7,  7,  7,  7,  8,  8,  8,  9,  9,  9, 10,
   10, 10, 11, 11, 11, 12, 12, 13, 13, 13, 14, 14, 15, 15, 16, 16,
   17, 17, 18, 18, 19, 19, 20, 20, 21, 21, 22, 22, 23, 24, 24, 25,
   25, 26, 27, 27, 28, 29, 29, 30, 31, 32, 32, 33, 34, 35, 35, 36,
   37, 38, 39, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 50,
   51, 52, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 66, 67, 68,
   69, 70, 72, 73, 74, 75, 77, 78, 79, 81, 82, 83, 85, 86, 87, 89,
   90, 92, 93, 95, 96, 98, 99,101,102,104,105,107,109,110,112,114,
  115,117,119,120,122,124,126,127,129,131,133,135,137,138,140,142,
  144,146,148,150,152,154,156,158,160,162,164,167,169,171,173,175,
  177,180,182,184,186,189,191,193,196,198,200,203,205,208,210,213,
  215,218,220,223,225,228,231,233,236,239,241,244,247,249,252,255 };

class RGB7Seg
{
    private:
        uint8_t current_page = 0;
        uint8_t address = 0x30;
        uint8_t rgb_values[197][3];


    public:
        RGB7Seg();
        void enable();
        uint8_t reset();
        uint8_t get_id();
        void unlock();
        uint8_t select_page(uint8_t page);
        
        void set_LED(int pos, uint8_t value[3]);
        void set_pixel(int led, int rgb);
        void set_current(uint8_t current);
        void set_segment(uint8_t segment, uint8_t digit, uint8_t value[3]);
        void set_digit(uint8_t pos, uint8_t value, uint8_t my_rgb_value[3]);
        uint8_t get_current();

        void set_scaling();

};
#endif